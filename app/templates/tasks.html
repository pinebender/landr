{% extends "layout.html" %}
{% block content %}

<div class="row">
	<div class="col-md-12 col-xs-12 col-sm-12">
		<h2>Task List: <button type="button" class="btn btn-default btn-sm" id="showaddform">Add Task</button></h2>
		<table class="tasklist">
			<tr class="tlheaders">
				<!-- <td>#</td> -->
				<td>Title</td>
				<td>Description</td>
				<td>Point Value</td>
				<td>Date Added</td>
			</tr>
		{% for task in tasks %}
 			<tr>
				<!-- edit styling to space rows properly -->
				<!-- <td>{{ loop.index }}</td> --> <!-- numbering; uses loop index, starting at 1 -->
				<td>{{ task.title }}</td>
				<td>{{ task.body|safe }}</td> <!-- Test this out as |safe; allows html to render -->
				<td>{{ task.value }}</td>
				<td>{{ task.dateadded.strftime('%b, %d, %Y') }}</td>
				<td class="colcontrols">
					<form method='post' action='/completetask' id="comptask{{task.id}}"></form>
						<input type='hidden' name='comptaskid' value="{{ task.id }}" form="comptask{{task.id}}">
						<button type="submit" class = "btn btn-default btn-xs taskcontrols" form="comptask{{task.id}}">Complete</button>
				</td>
				<td class="colcontrols">
					<form method='post' action='/deletetask' id="deltask{{task.id}}"></form>
						<input type="hidden" name="deltaskid" value="{{ task.id }}" form="deltask{{task.id}}">
						<button type="submit" class="btn btn-danger btn-xs taskcontrols" form="deltask{{task.id}}">Delete</button>
				</td>
			</tr>
		{% endfor %}
		</table>		
	</div>
</div>

{% if comptasks|length > 0 %}
<div class="row" style="margin-top: 20px;">
	<div class="col-md-12 col-xs-12 col-sm-12">
		<h2>Completed Tasks:</h2>
		<table class="tasklist">
			<tr class="tlheaders">
				<!-- <td>#</td> -->
				<td>Title</td>
				<td>Description</td>
				<td>Point Value</td>
				<td>Date Added</td>
			</tr>
		{% for task in comptasks %}
			<tr> 
				<!-- edit styling to space rows properly -->
				<!-- <td>{{ loop.index }}</td> --> <!-- numbering; uses loop index, starting at 1 -->
				<td>{{ task.title }}</td>
				<td>{{ task.body|safe }}</td> <!-- Test this out as |safe; allows html to render -->
				<td>{{ task.value }}</td>
				<td>{{ task.dateadded.strftime('%b %d, %Y') }}</td>
				<td class="colcontrols"></td>
				<td class="colcontrols">
					<form method='post' action='/deletetask' id="deltask{{task.id}}"></form>
						<input type="hidden" name="deltaskid" value="{{ task.id }}" form="deltask{{task.id}}">
						<button type="submit" class="btn btn-danger btn-xs taskcontrols" form="deltask{{task.id}}">Delete</button>	
				</td>
			</tr>
		{% endfor %}
		</table>		
	</div>
</div>
{% endif %}

<div class="row" style="margin-top: 20px;">
	<div class="col-md-8 col-xs-8 col-sm-8">
		<div id="addform" style="display: none;">
			<h3>Add a New Task</h3>
			<form id='addtask' method='post' action='/tasks'>
				<h3>Title:</h3>
				<textarea rows="1" cols="50" name="title" form="addtask" placeholder="Title" maxlength="75" required></textarea>
				<h3>Description:</h3>
				<textarea rows="5" cols="50" name="body" form="addtask" placeholder="Describe your task!" maxlength="300"></textarea>
				<h3>Point Value:</h3>
				<input type="number" name="value" form="addtask" value="1" maxlength="3" id="value"><br/>						
			</form>
		</div>
		<div class="submitbuttons">
			<button type="submit" class="btn btn-default btn-sm" form="addtask" id="submitbutton" style="display: none; margin-right: 5px">Submit</button>
			<button type="button" class="btn btn-default btn-sm" id="cancelbutton" style="display: none">Cancel</button>
		</div>
	</div>			
</div>

{% endblock %}

